(function(t){function e(e){for(var o,a,i=e[0],s=e[1],u=e[2],l=0,d=[];l<i.length;l++)a=i[l],n[a]&&d.push(n[a][0]),n[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);p&&p(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var t,e=0;e<c.length;e++){for(var r=c[e],o=!0,a=1;a<r.length;a++){var i=r[a];0!==n[i]&&(o=!1)}o&&(c.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},a={app:0},n={app:0},c=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-216c17e0":"e1b17604","chunk-2d22d746":"3d7a1a40"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],r={"chunk-216c17e0":1};a[t]?e.push(a[t]):0!==a[t]&&r[t]&&e.push(a[t]=new Promise(function(e,r){for(var o="css/"+({}[t]||t)+"."+{"chunk-216c17e0":"2b5119a3","chunk-2d22d746":"31d6cfe0"}[t]+".css",a=s.p+o,n=document.getElementsByTagName("link"),c=0;c<n.length;c++){var i=n[c],u=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(u===o||u===a))return e()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){i=l[c],u=i.getAttribute("data-href");if(u===o||u===a)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var o=e&&e.target&&e.target.src||a,n=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");n.request=o,r(n)},d.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){a[t]=0}));var o=n[t];if(0!==o)if(o)e.push(o[2]);else{var c=new Promise(function(e,r){o=n[t]=[e,r]});e.push(o[2]=c);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(t),u=function(e){d.onerror=d.onload=null,clearTimeout(p);var r=n[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,c=new Error("Loading chunk "+t+" failed.\n("+o+": "+a+")");c.type=o,c.request=a,r[1](c)}n[t]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;c.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);var o=r("2b0e"),a=r("bb71");r("da64");o["a"].use(a["a"],{iconfont:"md"});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("app-header"),r("v-content",[r("v-container",{attrs:{fluid:""}},[r("router-view")],1)],1)],1)},c=[],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-toolbar",{attrs:{app:""}},[r("v-toolbar-title",{staticClass:"headline text-uppercase",staticStyle:{cursor:"pointer"},on:{click:function(e){t.toHome()}}},[r("span",{attrs:{to:"/checkout"}},[t._v("M2E")]),r("span",{staticClass:"font-weight-light"},[t._v("Shop")])]),r("v-spacer"),r("v-spacer"),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[r("v-badge",{staticClass:"mt-3 mr-5",attrs:{color:"#8e23a6",disabled:0===t.getCartTotal}},[r("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(this.getCartTotal))]),r("v-btn",{attrs:{flat:"",icon:"",to:"/checkout",disabled:0===t.getCartTotal,color:"#8e23a6"}},[r("v-icon",{attrs:{large:""}},[t._v("shopping_cart")])],1)],1),r("v-btn",{attrs:{flat:""}},[t._v("Login")])],1)],1)],1)},s=[],u=r("2f62"),l={data(){return{}},computed:{...Object(u["b"])({getProductList:"getProductList",getTotalProducts:"getTotalProducts",getLoader:"getLoader",getCart:"getCart",getCartGroupedBy:"getCartGroupedBy",getCartTotal:"getCartTotal"})},mounted(){},methods:{toHome(){this.$router.push("/")}}},d=l,p=r("2877"),f=r("6544"),g=r.n(f),m=r("4ca6"),h=r("8336"),v=r("132d"),y=r("9910"),b=r("71d9"),C=r("2a7f"),k=Object(p["a"])(d,i,s,!1,null,null,null);k.options.__file="Header.vue";var P=k.exports;g()(k,{VBadge:m["a"],VBtn:h["a"],VIcon:v["a"],VSpacer:y["a"],VToolbar:b["a"],VToolbarItems:C["a"],VToolbarTitle:C["b"]});var T={name:"App",components:{appHeader:P},data(){return{}}},S=T,_=r("7496"),w=r("a523"),x=r("549c"),L=Object(p["a"])(S,n,c,!1,null,null,null);L.options.__file="App.vue";var O=L.exports;g()(L,{VApp:_["a"],VContainer:w["a"],VContent:x["a"]});var $=r("8c4f"),N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",{attrs:{fluid:""}},[r("v-layout",{attrs:{"align-start":"","justify-start":"",row:"",wrap:""}},[r("v-flex",{attrs:{xl12:"",lg12:"",md12:"",sm12:"",xs12:""}},[r("v-container",[r("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.getLoader,expression:"!getLoader"}],attrs:{"justify-start":"",row:"",wrap:""}},t._l(t.getProductList,function(t){return r("product",{key:t.id,attrs:{info:t}})})),r("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.getLoader,expression:"getLoader"}],attrs:{"align-center":"","justify-center":""}},[r("breeding-rhombus-spinner",{attrs:{"animation-duration":2e3,size:65,color:"#ff1d5e"}})],1)],1)],1)],1)],1)],1)},H=[],j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var o=e.hover;return r("v-card",{staticClass:"product-item mr-4 mb-4",attrs:{color:"grey lighten-4","max-width":"400"}},[r("v-img",{attrs:{"aspect-ratio":16/9,src:"https://res.cloudinary.com/djhqderty/image/upload/c_fit/"+t.info.photo}},[r("v-expand-transition",[o?r("div",{staticClass:"d-flex transition-fast-in-fast-out orange darken-2 v-card--reveal display-3 white--text",staticStyle:{height:"100%"}},[t._v("\n                        £"+t._s(t.info.price)+"\n                    ")]):t._e()])],1),r("v-card-text",{staticClass:"pt-4",staticStyle:{position:"relative"}},[r("v-btn",{staticClass:"white--text",attrs:{absolute:"",color:"orange",disabled:0===t.info.stock,fab:"",medium:"",right:"",top:""},on:{click:function(e){t.addProductToCart(t.info)}}},[r("v-icon",[t._v("shopping_cart")])],1),r("div",{staticClass:"font-weight-light grey--text title mb-2"},[t._v("Stock: "),r("strong",[t._v(t._s(t.info.stock))])]),r("h4",{staticClass:"font-weight-light orange--text mb-2"},[t._v(t._s(t.info.name))]),r("div",{staticClass:"font-weight-light title mb-2"},[r("span",[t._v("£"+t._s(t.info.price))])])],1)],1)}}])}),r("v-snackbar",{attrs:{timeout:t.timeout,color:"info",top:t.top},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n    "+t._s(t.text)+"\n    "),r("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n    Close\n    ")])],1)],1)},V=[],B={props:["info"],data(){return{snackbar:!1,timeout:1e3,top:!0,text:"Pink T-shirt added"}},methods:{addProductToCart(t){this.$store.dispatch("addProductToCart",t),this.text=t.name+" added.",this.snackbar=!0}}},J=B,F=(r("cc4b"),r("b0af")),E=r("99d9"),q=r("0789"),A=r("ce87"),I=r("adda"),G=r("2db4"),M=Object(p["a"])(J,j,V,!1,null,"a585ff56",null);M.options.__file="Product.vue";var R=M.exports;g()(M,{VBtn:h["a"],VCard:F["a"],VCardText:E["b"],VExpandTransition:q["a"],VHover:A["a"],VIcon:v["a"],VImg:I["a"],VSnackbar:G["a"]});var Q=r("9243"),U=r("4583"),z={components:{Product:R,BreedingRhombusSpinner:U["a"]},data(){return{productList:[],loader:!1}},computed:{...Object(u["b"])({getProductList:"getProductList",getTotalProducts:"getTotalProducts",getLoader:"getLoader",getCart:"getCart",getCartGroupedBy:"getCartGroupedBy",getCartTotal:"getCartTotal"})},mounted(){this.$store.dispatch("loadProducts")},methods:{}},D=z,K=r("0e8f"),W=r("a722"),X=Object(p["a"])(D,N,H,!1,null,null,null);X.options.__file="Home.vue";var Y=X.exports;g()(X,{VContainer:w["a"],VFlex:K["a"],VLayout:W["a"]}),o["a"].use($["a"]);var Z=new $["a"]({routes:[{path:"/",name:"home",component:Y},{path:"/about",name:"about",component:()=>r.e("chunk-2d22d746").then(r.bind(null,"f820"))},{path:"/checkout",name:"checkout",component:()=>r.e("chunk-216c17e0").then(r.bind(null,"7cb4"))}]});o["a"].use(u["a"]);var tt=new u["a"].Store({state:{},mutations:{},actions:{}}),et=r("2ef0"),rt=r.n(et);const ot={cart:[],cartTotal:0,cartTotalCost:0,productList:[],productListFiltered:[],totalProducts:0,loader:!1},at={getCart:t=>{return t.cart},getCartTotal:t=>{return t.cartTotal},getCartTotalCost:t=>{return parseFloat(t.cartTotalCost).toFixed(2)},getCartGroupedBy:t=>{return rt.a.groupBy(t.cart,"name")},getCartProducts:t=>{const e=[];return rt.a.each(rt.a.groupBy(t.cart,"name"),function(t){const r={};r.name=t[0].name,r.quantity=t.length,r.price=t[0].price,r.photo=t[0].photo,e.push(r)}),e},getProductList:t=>{return t.productList},getLoader:t=>{return t.loader},getTotalProducts:t=>{return t.totalProducts}},nt={loadProducts(t){return t.commit("startCall"),Q["a"].getProductList().then(e=>{t.commit("loadProductsHandler",e),t.commit("endCall")}).catch(t=>{throw console.log(t),t})},addProductToCart(t,e){if(t.commit("addProductToCartHandler",e),console.log(`Store / Action -> addProductToCartHandler 1: ${JSON.stringify(e)}`),e.stock>0)return e.stock=e.stock-1,console.log(`Store / Action -> addProductToCartHandler 2: ${JSON.stringify(e)}`),Q["a"].updateStockProduct(e).then(t=>{console.log(`Result: ${JSON.stringify(t)}`)}).catch(t=>{throw console.log(t),t})},decreaseProductFromCart(t,e){let r=rt.a.find(ot.productList,function(t){return t.name===e});return console.log(`productListFound: ${JSON.stringify(r)}`),r.stock=r.stock+1,console.log(`productListFound: ${JSON.stringify(r)}`),Q["a"].updateStockProduct(r).then(r=>{console.log(`Result: ${JSON.stringify(r)}`),t.commit("decreaseProductFromCartHandler",e)}).catch(t=>{throw console.log(t),t})},removeProductFromCart(t,e){let r=rt.a.find(ot.productList,function(t){return t.name===e.name});return console.log(`1. productListFound: ${JSON.stringify(r)}`),r.stock=r.stock+e.quantity,console.log(`2. productListFound: ${JSON.stringify(r)}`),Q["a"].updateStockProduct(r).then(r=>{console.log(`Result: ${JSON.stringify(r)}`),t.commit("removeProductFromCartHandler",e)}).catch(t=>{throw console.log(t),t})},increaseQuantity(t,e){console.log(`increaseStockByOne: ${e}`);let r=rt.a.find(ot.cart,function(t){return t.name===e}),o=rt.a.find(ot.productList,function(t){return t.name===e});if(t.commit("increaseQuantityHandler",r),console.log(`itemFound: ${JSON.stringify(o)}`),o.stock>0)return o.stock=o.stock-1,console.log(`Store / Action -> addProductToCartHandler 2: ${JSON.stringify(o)}`),Q["a"].updateStockProduct(o).then(t=>{console.log(`Result: ${JSON.stringify(t)}`)}).catch(t=>{throw console.log(t),t})},increaseStockByOne(t,e){let r=rt.a.find(ot.cart,function(t){return t.name===e});t.commit("increaseStockByOneHandler",r)}},ct={startCall(t){t.loader=!0},endCall(t){t.loader=!1},loadProductsHandler(t,e){t.productList=e.rows,t.totalProducts=e.count},addProductToCartHandler(t,e){t.cartTotal+=1;let r=rt.a.find(t.cart,function(t){return t.name===e.name});if(rt.a.isUndefined(r)){console.log(`add to cart: ${e.name}`);let r={id:e.id,photo:e.photo,name:e.name,price:e.price,quantity:1,total:e.price};t.cart.push(r),t.cartTotalCost+=e.price}else{let r=rt.a.findIndex(t.cart,{name:e.name});t.cart[r].total+=e.price,t.cart[r].quantity+=1,t.cartTotalCost+=e.price}},decreaseProductFromCartHandler(t,e){t.cartTotal-=1;let r=rt.a.find(t.cart,function(t){return t.name===e});console.log(`itemFound: ${JSON.stringify(r,null,4)}`);let o=rt.a.findIndex(t.cart,{name:e});console.log(`indexProduct: ${JSON.stringify(o,null,4)}`),1===r.quantity?(t.cart.splice(o,1),t.cartTotalCost-=r.price):(t.cart[o].total-=r.price,t.cart[o].quantity-=1,t.cartTotalCost-=r.price)},removeProductFromCartHandler(t,e){t.cartTotal-=e.quantity;let r=rt.a.find(t.cart,function(t){return t.name===e.name});console.log(`itemFound: ${JSON.stringify(r,null,4)}`);let o=rt.a.findIndex(t.cart,{name:e.name});console.log(`indexProduct: ${JSON.stringify(o,null,4)}`),t.cart.splice(o,1),t.cartTotalCost-=r.price*e.quantity},increaseQuantityHandler(t,e){console.log(`increaseQuantityHandler MUTATION: ${e}`),t.cartTotal+=1;let r=rt.a.findIndex(t.cart,{name:e.name});t.cart[r].total+=e.price,t.cart[r].quantity+=1,t.cartTotalCost+=e.price},increaseStockByOneHandler(t,e){rt.a.find(t.productList,function(t){return t.name===e});let r=rt.a.findIndex(t.productList,{name:e});t.productList[r].stock+=1},decreaseStockByOneHandler(t,e){let r=rt.a.findIndex(t.productList,{name:e});t.productList[r].stock-=1}};var it={state:ot,getters:at,actions:nt,mutations:ct};o["a"].use(u["a"]);const st=new u["a"].Store({modules:{auth:tt,shop:it}});o["a"].config.productionTip=!1,new o["a"]({router:Z,store:st,render:t=>t(O)}).$mount("#app")},"7a7f":function(t,e,r){},9243:function(t,e,r){"use strict";var o=r("bc3a"),a=r.n(o);r("4328");e["a"]={getProductList(){return a()({method:"GET",url:"https://m2e-api.herokuapp.com/products"}).then(t=>{return t.data})},updateStockProduct(t){return console.log(`API: updateStockProduct: ${t}`),a()({headers:{"Content-Type":"application/json"},method:"PUT",url:"https://m2e-api.herokuapp.com/products/"+t.id,data:JSON.stringify(t)}).then(t=>{return t.data})}}},cc4b:function(t,e,r){"use strict";var o=r("7a7f"),a=r.n(o);a.a}});
//# sourceMappingURL=app.a5b97513.js.map