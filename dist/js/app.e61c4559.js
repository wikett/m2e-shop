(function(t){function e(e){for(var r,o,i=e[0],s=e[1],u=e[2],l=0,d=[];l<i.length;l++)o=i[l],n[o]&&d.push(n[o][0]),n[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);p&&p(e);while(d.length)d.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],r=!0,o=1;o<a.length;o++){var i=a[o];0!==n[i]&&(r=!1)}r&&(c.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},o={app:0},n={app:0},c=[];function i(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-216c17e0":"e33369af"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(t){var e=[],a={"chunk-216c17e0":1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=new Promise(function(e,a){for(var r="css/"+({}[t]||t)+"."+{"chunk-216c17e0":"2b5119a3"}[t]+".css",o=s.p+r,n=document.getElementsByTagName("link"),c=0;c<n.length;c++){var i=n[c],u=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(u===r||u===o))return e()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){i=l[c],u=i.getAttribute("data-href");if(u===r||u===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var r=e&&e.target&&e.target.src||o,n=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");n.request=r,a(n)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)}).then(function(){o[t]=0}));var r=n[t];if(0!==r)if(r)e.push(r[2]);else{var c=new Promise(function(e,a){r=n[t]=[e,a]});e.push(r[2]=c);var u,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(t),u=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=n[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,c=new Error("Loading chunk "+t+" failed.\n("+r+": "+o+")");c.type=r,c.request=o,a[1](c)}n[t]=void 0}};var p=setTimeout(function(){u({type:"timeout",target:d})},12e4);d.onerror=d.onload=u,l.appendChild(d)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var p=l;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2bb7":function(t,e,a){},"540c":function(t,e,a){"use strict";var r=a("2bb7"),o=a.n(r);o.a},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),o=a("bb71");a("da64");r["a"].use(o["a"],{iconfont:"md"});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("app-header"),a("v-content",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1)],1)},c=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-title",{staticClass:"headline text-uppercase",staticStyle:{cursor:"pointer"},on:{click:function(e){t.toHome()}}},[a("span",{attrs:{to:"/checkout"}},[t._v("M2E")]),a("span",{staticClass:"font-weight-light"},[t._v("Shop")])]),a("v-spacer"),a("v-spacer"),a("v-toolbar-items",[a("v-badge",{staticClass:"mt-3 mr-5",attrs:{color:"#8e23a6",disabled:0===t.getCartTotal}},[a("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(this.getCartTotal))]),a("v-btn",{attrs:{flat:"",icon:"",to:"/checkout",disabled:0===t.getCartTotal,color:"#8e23a6"}},[a("v-icon",{attrs:{large:""}},[t._v("shopping_cart")])],1)],1),a("v-btn",{attrs:{flat:""}},[t._v("Login")])],1)],1)],1)},s=[],u=a("2f62"),l={data(){return{}},computed:{...Object(u["b"])({getCartTotal:"getCartTotal"})},mounted(){},methods:{toHome(){this.$router.push("/")}}},d=l,p=a("2877"),f=a("6544"),m=a.n(f),h=a("4ca6"),v=a("8336"),g=a("132d"),b=a("9910"),y=a("71d9"),C=a("2a7f"),k=Object(p["a"])(d,i,s,!1,null,null,null);k.options.__file="Header.vue";var T=k.exports;m()(k,{VBadge:h["a"],VBtn:v["a"],VIcon:g["a"],VSpacer:b["a"],VToolbar:y["a"],VToolbarItems:C["a"],VToolbarTitle:C["b"]});var P={name:"App",components:{appHeader:T},data(){return{}}},_=P,w=a("7496"),x=a("a523"),L=a("549c"),S=Object(p["a"])(_,n,c,!1,null,null,null);S.options.__file="App.vue";var j=S.exports;m()(S,{VApp:w["a"],VContainer:x["a"],VContent:L["a"]});var O=a("8c4f"),V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"align-start":"","justify-start":"",row:"",wrap:""}},[a("v-flex",{attrs:{xl12:"",lg12:"",md12:"",sm12:"",xs12:""}},[a("v-container",[a("v-layout",{directives:[{name:"show",rawName:"v-show",value:!t.getLoader,expression:"!getLoader"}],attrs:{"justify-start":"",row:"",wrap:""}},t._l(t.getProductList,function(t){return a("product",{key:t.id,attrs:{info:t}})})),a("v-layout",{directives:[{name:"show",rawName:"v-show",value:t.getLoader,expression:"getLoader"}],attrs:{"align-center":"","justify-center":""}},[a("breeding-rhombus-spinner",{attrs:{"animation-duration":2e3,size:65,color:"#ff1d5e"}})],1)],1)],1)],1)],1)],1)},H=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return a("v-card",{staticClass:"product-item mr-4 mb-4",attrs:{color:"grey lighten-4","max-width":"400"}},[a("v-img",{attrs:{"aspect-ratio":16/9,src:"https://res.cloudinary.com/djhqderty/image/upload/c_fit/"+t.info.photo}},[a("v-expand-transition",[r?a("div",{staticClass:"d-flex transition-fast-in-fast-out orange darken-2 v-card--reveal display-3 white--text",staticStyle:{height:"100%"}},[t._v("\n                        £"+t._s(t.info.price)+"\n                    ")]):t._e()])],1),a("v-card-text",{staticClass:"pt-4",staticStyle:{position:"relative"}},[a("v-btn",{staticClass:"white--text",attrs:{absolute:"",color:"orange",disabled:0===t.info.stock,fab:"",medium:"",right:"",top:""},on:{click:function(e){t.addProductToCart(t.info)}}},[a("v-icon",[t._v("shopping_cart")])],1),a("div",{staticClass:"font-weight-light grey--text title mb-2"},[t._v("Stock: "),a("strong",[t._v(t._s(t.info.stock))])]),a("h4",{staticClass:"font-weight-light orange--text mb-2"},[t._v(t._s(t.info.name))]),a("div",{staticClass:"font-weight-light title mb-2"},[a("span",[t._v("£"+t._s(t.info.price))])])],1)],1)}}])}),a("v-snackbar",{attrs:{timeout:t.timeout,color:"info",top:t.top},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n        "+t._s(t.text)+"\n        "),a("v-btn",{attrs:{dark:"",flat:""},on:{click:function(e){t.snackbar=!1}}},[t._v("\n            Close\n        ")])],1)],1)},E=[],q={props:["info"],data(){return{snackbar:!1,timeout:1e3,top:!0,text:""}},methods:{addProductToCart(t){this.$store.dispatch("addProductToCart",t),this.text=t.name+" added.",this.snackbar=!0}}},I=q,$=(a("540c"),a("b0af")),F=a("99d9"),A=a("0789"),N=a("ce87"),M=a("adda"),G=a("2db4"),J=Object(p["a"])(I,B,E,!1,null,"2626e036",null);J.options.__file="Product.vue";var Q=J.exports;m()(J,{VBtn:v["a"],VCard:$["a"],VCardText:F["b"],VExpandTransition:A["a"],VHover:N["a"],VIcon:g["a"],VImg:M["a"],VSnackbar:G["a"]});var R=a("9243"),U=a("4583"),z={components:{Product:Q,BreedingRhombusSpinner:U["a"]},data(){return{productList:[],loader:!1}},computed:{...Object(u["b"])({getProductList:"getProductList",getTotalProducts:"getTotalProducts",getLoader:"getLoader",getCart:"getCart",getCartGroupedBy:"getCartGroupedBy",getCartTotal:"getCartTotal"})},mounted(){this.$store.dispatch("loadProducts")},methods:{}},D=z,K=a("0e8f"),W=a("a722"),X=Object(p["a"])(D,V,H,!1,null,null,null);X.options.__file="Home.vue";var Y=X.exports;m()(X,{VContainer:x["a"],VFlex:K["a"],VLayout:W["a"]}),r["a"].use(O["a"]);var Z=new O["a"]({routes:[{path:"/",name:"home",component:Y},{path:"/checkout",name:"checkout",component:()=>a.e("chunk-216c17e0").then(a.bind(null,"7cb4"))}]});r["a"].use(u["a"]);var tt=new u["a"].Store({state:{},mutations:{},actions:{}}),et=a("2ef0"),at=a.n(et);const rt={cart:[],cartTotal:0,cartTotalCost:0,productList:[],productListFiltered:[],totalProducts:0,loader:!1},ot={getCart:t=>{return t.cart},getCartTotal:t=>{return t.cartTotal},getCartTotalCost:t=>{return parseFloat(t.cartTotalCost).toFixed(2)},getCartGroupedBy:t=>{return at.a.groupBy(t.cart,"name")},getCartProducts:t=>{const e=[];return at.a.each(at.a.groupBy(t.cart,"name"),function(t){const a={};a.name=t[0].name,a.quantity=t.length,a.price=t[0].price,a.photo=t[0].photo,e.push(a)}),e},getProductList:t=>{return t.productList},getLoader:t=>{return t.loader},getTotalProducts:t=>{return t.totalProducts}},nt={loadProducts(t){return t.commit("startCall"),R["a"].getProductList().then(e=>{t.commit("loadProductsHandler",e),t.commit("endCall")}).catch(t=>{throw console.log(t),t})},addProductToCart(t,e){if(t.commit("addProductToCartHandler",e),e.stock>0)return e.stock=e.stock-1,R["a"].updateStockProduct(e).then(t=>{console.log(`Result: ${JSON.stringify(t)}`)}).catch(t=>{throw console.log(t),t})},decreaseProductFromCart(t,e){let a=at.a.find(rt.productList,function(t){return t.name===e});return a.stock=a.stock+1,R["a"].updateStockProduct(a).then(a=>{t.commit("decreaseProductFromCartHandler",e)}).catch(t=>{throw console.log(t),t})},removeProductFromCart(t,e){let a=at.a.find(rt.productList,function(t){return t.name===e.name});return a.stock=a.stock+e.quantity,R["a"].updateStockProduct(a).then(a=>{t.commit("removeProductFromCartHandler",e)}).catch(t=>{throw console.log(t),t})},increaseQuantity(t,e){let a=at.a.find(rt.cart,function(t){return t.name===e}),r=at.a.find(rt.productList,function(t){return t.name===e});if(r.stock>0)return r.stock=r.stock-1,R["a"].updateStockProduct(r).then(e=>{t.commit("increaseQuantityHandler",a)}).catch(t=>{throw console.log(t),t})},increaseStockByOne(t,e){let a=at.a.find(rt.cart,function(t){return t.name===e});t.commit("increaseStockByOneHandler",a)}},ct={startCall(t){t.loader=!0},endCall(t){t.loader=!1},loadProductsHandler(t,e){t.productList=e.rows,t.totalProducts=e.count},addProductToCartHandler(t,e){t.cartTotal+=1;let a=at.a.find(t.cart,function(t){return t.name===e.name});if(at.a.isUndefined(a)){console.log(`add to cart: ${e.name}`);let a={id:e.id,photo:e.photo,name:e.name,price:e.price,quantity:1,total:e.price};t.cart.push(a),t.cartTotalCost+=e.price}else{let a=at.a.findIndex(t.cart,{name:e.name});t.cart[a].total+=e.price,t.cart[a].quantity+=1,t.cartTotalCost+=e.price}},decreaseProductFromCartHandler(t,e){t.cartTotal-=1;let a=at.a.find(t.cart,function(t){return t.name===e}),r=at.a.findIndex(t.cart,{name:e});1===a.quantity?(t.cart.splice(r,1),t.cartTotalCost-=a.price):(t.cart[r].total-=a.price,t.cart[r].quantity-=1,t.cartTotalCost-=a.price)},removeProductFromCartHandler(t,e){t.cartTotal-=e.quantity;let a=at.a.find(t.cart,function(t){return t.name===e.name}),r=at.a.findIndex(t.cart,{name:e.name});t.cart.splice(r,1),t.cartTotalCost-=a.price*e.quantity},increaseQuantityHandler(t,e){t.cartTotal+=1;let a=at.a.findIndex(t.cart,{name:e.name});t.cart[a].total+=e.price,t.cart[a].quantity+=1,t.cartTotalCost+=e.price},increaseStockByOneHandler(t,e){at.a.find(t.productList,function(t){return t.name===e});let a=at.a.findIndex(t.productList,{name:e});t.productList[a].stock+=1},decreaseStockByOneHandler(t,e){let a=at.a.findIndex(t.productList,{name:e});t.productList[a].stock-=1}};var it={state:rt,getters:ot,actions:nt,mutations:ct};r["a"].use(u["a"]);const st=new u["a"].Store({modules:{auth:tt,shop:it}});r["a"].config.productionTip=!1,new r["a"]({router:Z,store:st,render:t=>t(j)}).$mount("#app")},9243:function(t,e,a){"use strict";var r=a("bc3a"),o=a.n(r);a("4328");e["a"]={getProductList(){return o()({method:"GET",url:"https://m2e-api.herokuapp.com/products"}).then(t=>{return t.data})},updateStockProduct(t){return console.log(`API: updateStockProduct: ${t}`),o()({headers:{"Content-Type":"application/json"},method:"PUT",url:"https://m2e-api.herokuapp.com/products/"+t.id,data:JSON.stringify(t)}).then(t=>{return t.data})}}}});
//# sourceMappingURL=app.e61c4559.js.map